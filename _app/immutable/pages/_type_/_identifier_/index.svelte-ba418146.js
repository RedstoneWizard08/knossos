import{S as F,i as K,s as Q,l as $,g as k,o as y,p as H,q as v,d,w as T,k as L,e as j,x as D,m as A,c as E,a as M,b as w,f as W,y as P,I as X,B,Y as V,v as x,ah as ee,n as C,E as q,M as te,O as re,P as ne,Z as oe,t as le,h as ie,U as se,V as ae,ad as O,J as ce,T as fe,G as ue}from"../../../chunks/index-d77dc8df.js";import{B as G}from"../../../chunks/Button-e3650c0e.js";import{C as _e}from"../../../chunks/Chips-13b7f128.js";import{M as pe}from"../../../chunks/Meta-3a496eb2.js";import{a as me}from"../../../chunks/api-22161ac7.js";import{b as N}from"../../../chunks/parse-f51b9449.js";import{p as U,m as de,c as be,a as he}from"../../../chunks/_store-c7f9d3ff.js";import{d as z}from"../../../chunks/autosize.esm-05b78ead.js";import{P as ve}from"../../../chunks/pencil-d3afbb94.js";import{T as ye}from"../../../chunks/trash-86c5620f.js";import{X as ke}from"../../../chunks/x-f4a5dec2.js";import{S as ge}from"../../../chunks/save-e8d16d6a.js";import{b as $e}from"../../../chunks/formatters-45a0f877.js";import"../../../chunks/check-aff0c417.js";/* empty css                                                          */import"../../../chunks/axios-9833b136.js";import"../../../chunks/index-68131452.js";var we=l=>(z(l),{destroy(){z.destroy(l)}});function J(l){let e,r,t,n;const o=[Ee,je],i=[];function f(s,a){return s[2]?0:1}return e=f(l),r=i[e]=o[e](l),{c(){r.c(),t=$()},l(s){r.l(s),t=$()},m(s,a){i[e].m(s,a),k(s,t,a),n=!0},p(s,a){let p=e;e=f(s),e===p?i[e].p(s,a):(C(),y(i[p],1,1,()=>{i[p]=null}),H(),r=i[e],r?r.p(s,a):(r=i[e]=o[e](s),r.c()),v(r,1),r.m(t.parentNode,t))},i(s){n||(v(r),n=!0)},o(s){y(r),n=!1},d(s){i[e].d(s),s&&d(t)}}}function je(l){let e,r;return e=new G({props:{label:l[5]("generic.actions.edit"),color:"brand-light",icon:ve}}),e.$on("click",l[12]),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p(t,n){const o={};n&32&&(o.label=t[5]("generic.actions.edit")),e.$set(o)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Ee(l){let e,r,t,n;const o=[Te,Me],i=[];function f(s,a){return s[4]?0:1}return e=f(l),r=i[e]=o[e](l),{c(){r.c(),t=$()},l(s){r.l(s),t=$()},m(s,a){i[e].m(s,a),k(s,t,a),n=!0},p(s,a){let p=e;e=f(s),e===p?i[e].p(s,a):(C(),y(i[p],1,1,()=>{i[p]=null}),H(),r=i[e],r?r.p(s,a):(r=i[e]=o[e](s),r.c()),v(r,1),r.m(t.parentNode,t))},i(s){n||(v(r),n=!0)},o(s){y(r),n=!1},d(s){i[e].d(s),s&&d(t)}}}function Me(l){let e,r;return e=new G({props:{label:l[5]("generic.actions.cancel"),icon:ke}}),e.$on("click",l[11]),{c(){T(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,n){P(e,t,n),r=!0},p(t,n){const o={};n&32&&(o.label=t[5]("generic.actions.cancel")),e.$set(o)},i(t){r||(v(e.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Te(l){let e,r,t,n;return e=new G({props:{label:l[5]("generic.actions.discard"),icon:ye}}),e.$on("click",l[10]),t=new G({props:{label:l[5]("generic.actions.save"),color:"brand",icon:ge}}),t.$on("click",l[9]),{c(){T(e.$$.fragment),r=L(),T(t.$$.fragment)},l(o){D(e.$$.fragment,o),r=A(o),D(t.$$.fragment,o)},m(o,i){P(e,o,i),k(o,r,i),P(t,o,i),n=!0},p(o,i){const f={};i&32&&(f.label=o[5]("generic.actions.discard")),e.$set(f);const s={};i&32&&(s.label=o[5]("generic.actions.save")),t.$set(s)},i(o){n||(v(e.$$.fragment,o),v(t.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),y(t.$$.fragment,o),n=!1},d(o){B(e,o),o&&d(r),B(t,o)}}}function De(l){let e;function r(o,i){return o[1].body?Se:Be}let t=r(l),n=t(l);return{c(){e=j("div"),n.c(),this.h()},l(o){e=E(o,"DIV",{class:!0});var i=M(e);n.l(i),i.forEach(d),this.h()},h(){w(e,"class","project-body__text text svelte-11f4erl")},m(o,i){k(o,e,i),n.m(e,null)},p(o,i){t===(t=r(o))&&n?n.p(o,i):(n.d(1),n=t(o),n&&(n.c(),n.m(e,null)))},i:q,o:q,d(o){o&&d(e),n.d()}}}function Pe(l){let e,r,t,n,o,i;function f(u){l[13](u)}let s={options:[{label:"Editor",value:"editor"},{label:"Preview",value:"preview"}],neverEmpty:!0};l[3]!==void 0&&(s.value=l[3]),r=new _e({props:s}),te.push(()=>re(r,"value",f));function a(u,b){return u[3]==="editor"?Ie:Ve}let p=a(l),_=p(l);return{c(){e=j("div"),T(r.$$.fragment),n=L(),_.c(),o=$(),this.h()},l(u){e=E(u,"DIV",{class:!0});var b=M(e);D(r.$$.fragment,b),b.forEach(d),n=A(u),_.l(u),o=$(),this.h()},h(){w(e,"class","project-body__toolbar svelte-11f4erl")},m(u,b){k(u,e,b),P(r,e,null),k(u,n,b),_.m(u,b),k(u,o,b),i=!0},p(u,b){const c={};!t&&b&8&&(t=!0,c.value=u[3],ne(()=>t=!1)),r.$set(c),p===(p=a(u))&&_?_.p(u,b):(_.d(1),_=p(u),_&&(_.c(),_.m(o.parentNode,o)))},i(u){i||(v(r.$$.fragment,u),i=!0)},o(u){y(r.$$.fragment,u),i=!1},d(u){u&&d(e),B(r),u&&d(n),_.d(u),u&&d(o)}}}function Be(l){let e,r;return{c(){e=j("p"),r=le("This project description is empty."),this.h()},l(t){e=E(t,"P",{class:!0});var n=M(e);r=ie(n,"This project description is empty."),n.forEach(d),this.h()},h(){w(e,"class","project-body__text__placeholder svelte-11f4erl")},m(t,n){k(t,e,n),X(e,r)},p:q,d(t){t&&d(e)}}}function Se(l){let e,r=N(l[1].body)+"",t;return{c(){e=new se(!1),t=$(),this.h()},l(n){e=ae(n,!1),t=$(),this.h()},h(){e.a=t},m(n,o){e.m(r,n,o),k(n,t,o)},p(n,o){o&2&&r!==(r=N(n[1].body)+"")&&e.p(r)},d(n){n&&d(t),n&&e.d()}}}function Ve(l){let e,r=N(l[0])+"";return{c(){e=j("div"),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=M(e);n.forEach(d),this.h()},h(){w(e,"class","project-body__text text svelte-11f4erl")},m(t,n){k(t,e,n),e.innerHTML=r},p(t,n){n&1&&r!==(r=N(t[0])+"")&&(e.innerHTML=r)},d(t){t&&d(e)}}}function Ie(l){let e,r,t;return{c(){e=j("textarea"),this.h()},l(n){e=E(n,"TEXTAREA",{class:!0,placeholder:!0}),M(e).forEach(d),this.h()},h(){w(e,"class","project-body__editor svelte-11f4erl"),w(e,"placeholder","Enter project body...")},m(n,o){k(n,e,o),O(e,l[0]),r||(t=[ce(e,"input",l[14]),fe(we.call(null,e))],r=!0)},p(n,o){o&1&&O(e,n[0])},d(n){n&&d(e),r=!1,ue(t)}}}function He(l){var b;let e,r,t,n,o,i,f,s;e=new pe({props:{title:l[1].title+" - Minecraft "+l[5](`project.types.${l[1].project_type}.singular`),description:l[1].description+" - Download the Minecraft "+l[1].project_type+" "+l[1].title+" by "+l[6].find(Y).user.username+" on Modrinth.",color:l[7],image:(b=l[1])==null?void 0:b.icon_url}});let a=l[8].data.editBody&&J(l);const p=[Pe,De],_=[];function u(c,m){return c[2]?0:1}return i=u(l),f=_[i]=p[i](l),{c(){T(e.$$.fragment),r=L(),t=j("div"),n=j("div"),a&&a.c(),o=L(),f.c(),this.h()},l(c){D(e.$$.fragment,c),r=A(c),t=E(c,"DIV",{class:!0});var m=M(t);n=E(m,"DIV",{class:!0});var g=M(n);a&&a.l(g),g.forEach(d),o=A(m),f.l(m),m.forEach(d),this.h()},h(){w(n,"class","card__overlay card__overlay--row"),w(t,"class","card project-body card--gap-none svelte-11f4erl"),W(t,"--padding","0",!1)},m(c,m){P(e,c,m),k(c,r,m),k(c,t,m),X(t,n),a&&a.m(n,null),X(t,o),_[i].m(t,null),s=!0},p(c,[m]){var I;const g={};m&34&&(g.title=c[1].title+" - Minecraft "+c[5](`project.types.${c[1].project_type}.singular`)),m&66&&(g.description=c[1].description+" - Download the Minecraft "+c[1].project_type+" "+c[1].title+" by "+c[6].find(Y).user.username+" on Modrinth."),m&128&&(g.color=c[7]),m&2&&(g.image=(I=c[1])==null?void 0:I.icon_url),e.$set(g),c[8].data.editBody?a?(a.p(c,m),m&256&&v(a,1)):(a=J(c),a.c(),v(a,1),a.m(n,null)):a&&(C(),y(a,1,1,()=>{a=null}),H());let S=i;i=u(c),i===S?_[i].p(c,m):(C(),y(_[S],1,1,()=>{_[S]=null}),H(),f=_[i],f?f.p(c,m):(f=_[i]=p[i](c),f.c()),v(f,1),f.m(t,null))},i(c){s||(v(e.$$.fragment,c),v(a),v(f),s=!0)},o(c){y(e.$$.fragment,c),y(a),y(f),s=!1},d(c){B(e,c),c&&d(r),c&&d(t),a&&a.d(),_[i].d()}}}function R(l,e,r,t,n,o,i){try{var f=l[o](i),s=f.value}catch(a){r(a);return}f.done?e(s):Promise.resolve(s).then(t,n)}function Le(l){return function(){var e=this,r=arguments;return new Promise(function(t,n){var o=l.apply(e,r);function i(s){R(o,t,n,i,f,"next",s)}function f(s){R(o,t,n,i,f,"throw",s)}i(void 0)})}}const Y=l=>l.role==="Owner";function Ae(l,e,r){let t,n,o,i,f;V(l,U,h=>r(1,t=h)),V(l,$e,h=>r(5,n=h)),V(l,de,h=>r(6,o=h)),V(l,be,h=>r(7,i=h)),V(l,he,h=>r(8,f=h));var s=!1,a="editor",p=t.body,_;function u(h){_&&s&&(h.preventDefault(),h.returnValue="")}x(()=>{window.addEventListener("beforeunload",u)}),ee(()=>{window.removeEventListener("beforeunload",u)});function b(){return c.apply(this,arguments)}function c(){return c=Le(function*(){if(_){try{yield me("PATCH","project/"+t.id,{body:p})}catch(h){alert(h)}oe(U,t.body=p,t)}r(2,s=!1)}),c.apply(this,arguments)}const m=()=>{r(0,p=t.body),r(2,s=!1)},g=()=>r(2,s=!1),S=()=>{r(3,a="editor"),r(2,s=!0)};function I(h){a=h,r(3,a)}function Z(){p=this.value,r(0,p)}return l.$$.update=()=>{l.$$.dirty&3&&r(4,_=t.body!==p)},[p,t,s,a,_,n,o,i,f,b,m,g,S,I,Z]}class et extends F{constructor(e){super(),K(this,e,Ae,He,Q,{})}}export{et as default};
